# API Reference

Here is the API reference for the publicly available elements of the library.

It is organized into layers. Each layer strives to be useful. Pick the layer you want to work at.

## Layer 1

This layer is about abstracting the function of an LLM, so that you can think about prompting and output and tool use in
a way that does not tie you to a specific LLM, its calling conventions, and the quirks of its specific library.

At this layer we have:

- [LLMBroker](api_1.md#mojentic.llm.LLMBroker): This is the main entrypoint to the layer. It leverages an LLM specific
  Gateway, and is the primary interface for interacting with the LLM on the other side. The LLMBroker correctly handles
  text generation, structured output, and tool use.

- [OllamaGateway](api_1.md#mojentic.llm.OllamaGateway), [OpenAIGateway](api_1.md#mojentic.llm.OpenAIGateway): These are
  out-of-the-box adapters that will interact with models available through
  Ollama and OpenAI.

- [LLMGateway](api_1.md#mojentic.llm.LLMGateway): This is the abstract class that all LLM adapters must inherit from. It
  provides a common interface and isolation point for interacting with LLMs.

## Layer 2

This layer is about building Agents and the protocol by which a system of Agents can accomplish work.

At this layer we have:

- BaseAgent: This is the smallest and simplest computational worker in your system of agents. It provides a single call
  point for message passing. It determines what to do based on an incoming event, and what events (if any) to emit after
  it has done that. If deterministic work is what you need, this is where you build from.

- BaseAggregatingAgent: Because Agents receive one Event at a time, we may require multiple Events to be able to perform
  some action. Once all required events have been received, the Agent can then do its job, choose what events (if any)
  to emit when it's done. Events are aggregated by the correlation ID that is generated by the very first event in a
  chain of events.

- BaseLLMAgent: This is the base class for all Agents that leverage an LLM. There is an expectation that the work done
  by one of these agents will be non-deterministic because of the use of the LLM.

> This is very hierarchical, I would like this at some point to be compositional. Add something to the BaseAgent that
> allows it to aggregate. Add something that allows it to use an LLM. The inheritance hierarchy IMO will be too tightly
> coupled in a complex system.
